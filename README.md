
# **Master-Child Server**

This project hosts the **Master-Child Server**, which manages and aggregates positive random numbers generated by dynamically spawned child processes using Docker containers.

The system consists of:
- A **Master Server** implemented in Kotlin with Ktor.
- **Child Processes** implemented in Python.

The project supports spawning Docker containers as children, generating random numbers, and tracking progress.

---

## **Docker Hub Images**

The following images are hosted on Docker Hub:

- **Master Server**: [`qsmrkhef16/kotlin-service`](https://hub.docker.com/r/qsmrkhef16/kotlin-service)
- **Child Service**: [`qsmrkhef16/python-child-service`](https://hub.docker.com/r/qsmrkhef16/python-child-service)

---

## **Features**

- The **master server** tracks unique random numbers and their progress.
- Dynamically spawns **Docker containers (children)** to generate random numbers within a specific range.
- RESTful API endpoints for:
  - Creating child processes.
  - Querying progress.
- Child processes are lightweight and implemented in Python.

---

## **Structure**

```plaintext
.
├── MasterChildServer/        # Kotlin-based master server
├── child-app/                # Python-based child process
├── docker-compose.yml        # Docker Compose configuration for the system
└── README.md                 # Documentation
```

---

## **Getting Started**

### **Option 1: Using Docker Hub Images**

1. **Pull the Images**
   ```bash
   docker pull qsmrkhef16/kotlin-service
   docker pull qsmrkhef16/python-child-service
   ```

2. **Run the Master Server**
   ```bash
   docker run -d --name master-server -p 8080:8080 qsmrkhef16/kotlin-service
   ```

3. **Test API Endpoints**

   - **Start a Child Process**
     ```bash
     curl -X POST http://localhost:8080/create-child
     ```

   - **Check Progress**
     ```bash
     curl -X GET http://localhost:8080/progress
     ```

4. **Run the Python Child Service Manually**
   ```bash
   docker run --rm qsmrkhef16/python-child-service
   ```

---

### **Option 2: Building Locally from Source**

1. **Clone the Repositories**
   - Clone the main project:
     ```bash
     git clone https://github.com/LevaniMigriauli/master-child.git
     ```
   - Clone the master server specifically:
     ```bash
     git clone https://github.com/LevaniMigriauli/master-child-server.git
     ```

2. **Build Docker Images Locally**
   - Build the master server:
     ```bash
     docker build -t master-child-server-master ./MasterChildServer
     ```
   - Build the child service:
     ```bash
     docker build -t master-child-server-child ./child-app
     ```

3. **Run the Master Server**
   ```bash
   docker run -d --name master-server -p 8080:8080 master-child-server-master
   ```

4. **Test API Endpoints**

   - **Start a Child Process**
     ```bash
     curl -X POST http://localhost:8080/create-child
     ```

   - **Check Progress**
     ```bash
     curl -X GET http://localhost:8080/progress
     ```

5. **Run the Python Child Service Manually**
   ```bash
   docker run --rm master-child-server-child
   ```

---

## **Using Docker Compose**

1. **Ensure `docker-compose.yml` exists in your project directory**:

   ```yaml
   version: '3.8'

   services:
     master-server:
       image: qsmrkhef16/kotlin-service
       container_name: master-server
       ports:
         - "8080:8080"

     child-service:
       image: qsmrkhef16/python-child-service
       container_name: child-service
   ```

2. **Start the System**
   ```bash
   docker-compose up
   ```

3. **Stop the System**
   ```bash
   docker-compose down
   ```
